{% extends 'main.html' %}
{% load static %}

{% block content %}

<style>
    .group-container{
      display: grid;
      grid-template-columns: 1fr 6fr 1fr;
  
    }
    .telegram-settings-container2{
      display: grid;
      grid-template-columns: 6fr;
  
    }

</style>

<div class="group-container">

    <div></div>
  
    <div class="content-section">
        <div class="telegram-settings-container2">
            <div>
                <spam style="float:left">
                    <h1>{{ agenda_obj.name }} update</h1>
                </spam>
                <spam style="float:right">
                    <h3><a href="{{ agenda_obj.get_absolute_url }}">Go Back</a></h3>
                </spam>
            </div>
        </div>
        <div>
            {% include 'base/partials/agenda-update.html' %}   
        </div>
        
    </div>
  
    <div></div>
  
</div>

{% endblock content %}

{% block javascript %}

<script>
  // Call hideShow when page is loaded
  $(document).ready(function(){
      alertStatus()
  })
  
  // The jquery function below hides/shows the open_time and close_time fields depending on the selected time list 
  const alertStatus = (e) => {
  var text = document.getElementById("text");  
  if ($("#el").is(":checked")) {
    $('#id_open_time').parents('p:first').show();
    $('#id_close_time').parents('p:first').show();
    text.style.display = "none";
  } else {
    $('#id_open_time').parents('p:first').hide();
    $('#id_close_time').parents('p:first').hide();
    text.style.display = "block";
  }
};

  $(document).on("click", "#el", alertStatus);

  let form_count = Number($("[name=extra_field_count]").val());
// get extra form count so we know what index to use for the next item.


const addMoreBtn = document.getElementById('add-more')


document.addEventListener('click', (event)=>{
  if (event.target.id == 'add-more') {
    add_new_form(event)
  }
})

//addMoreBtn.addEventListener('click', (add_new_form))

function add_new_form(event) {
  if (event) {
    event.preventDefault()
  }
  const totalNewForms = document.getElementById('id_form-TOTAL_FORMS')
  const currentMondayForms = document.getElementsByClassName('monday-form')
  const currentFormCount = currentMondayForms.length 
  const formCopyTarget = document.getElementById('monday-form-list')
  const copyemptyFormEl = document.getElementById('empty-form').cloneNode(true)
  const deleteBtn = document.getElementById('delete')
  copyemptyFormEl.setAttribute('class', 'monday-form')
  copyemptyFormEl.setAttribute('id', `form-${currentFormCount}`)
  const regex = new RegExp('__prefix__', 'g')
  copyemptyFormEl.innerHTML = copyemptyFormEl.innerHTML.replace(regex, currentFormCount)
  totalNewForms.setAttribute('value', currentFormCount + 1)
  formCopyTarget.append(copyemptyFormEl)
}


</script>




{% endblock %}